<div *ngIf="!reg || !prov">
    <app-spinner></app-spinner>
</div>
<div class="container-fluid" *ngIf="reg">
    <div class="row">
      <span *ngFor="let region of reg; index as i; last as last">
          <span *ngIf="last">
            <h1 class="text-center my-5">La situazione Covid in<br>{{region.denominazione_regione}}</h1>
          </span>
      </span>
        <div class="col-lg-3 col-md-6 col-sm-12 col-12 cont">
            <div class="col-md-12 bg">
                <h3>Totale Positivi</h3>
                <span *ngFor="let region of reg; index as i; last as last">
                    <div class="positiveTot my-3" *ngIf="last">
                        {{region.totale_positivi | number: '1.': 'it-IT'}}
                    </div>
                </span>
                <div class="sub">
                    <h6 class="subtitle">Incremento</h6>
                    <span *ngFor="let region of reg; index as i; last as last">
                        <div *ngIf="last">
                            <span style="color:rgb(255, 170, 0);">
                                {{region.totale_positivi - reg[i -1].totale_positivi | number: '1.': 'it-IT'}}
                            </span>
                            <span style="color:lightgray; font-size:0.5em;">
                               + ({{region.totale_positivi - reg[i -1].totale_positivi - (reg[i -1].totale_positivi - reg[i -2].totale_positivi) | number: '1.': 'it-IT'}})
                            </span>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 col-12 cont">
            <div class="col-md-12 bg">
                <h3>Dimessi Guariti</h3>
                <span *ngFor="let region of reg; index as i; last as last">
                    <div class="healed my-3" *ngIf="last">
                        {{region.dimessi_guariti | number: '1.': 'it-IT'}}
                    </div>
                </span>
                <div class="sub">
                    <h6 class="subtitle">Incremento</h6>
                    <span *ngFor="let region of reg; index as i; last as last">
                        <div *ngIf="last">
                            <span style="color:rgb(255, 170, 0);">
                                {{region.dimessi_guariti - reg[i -1].dimessi_guariti | number: '1.': 'it-IT'}}
                            </span>
                            <span style="color:lightgray; font-size:0.5em;">
                                + ({{region.dimessi_guariti - reg[i -1].dimessi_guariti - (reg[i -1].dimessi_guariti - reg[i -2].dimessi_guariti) | number: '1.': 'it-IT'}})
                            </span>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 col-12 cont">
            <div class="col-md-12 bg">
                <h3>Deceduti</h3>
                <span *ngFor="let region of reg; index as i; last as last">
                    <div class="dead my-3" *ngIf="last">
                        {{region.deceduti | number: '1.': 'it-IT'}}
                    </div>
                </span>
                <div class="sub">
                    <h6 class="subtitle">Incremento</h6>
                    <span *ngFor="let region of reg; index as i; last as last">
                        <div *ngIf="last">
                            <span style="color:rgb(255, 170, 0);">
                                {{region.deceduti - reg[i -1].deceduti | number: '1.': 'it-IT'}}
                            </span>
                            <span style="color:lightgray; font-size:0.5em;">
                                + ({{region.deceduti - reg[i -1].deceduti - (reg[i -1].deceduti - reg[i -2].deceduti) | number: '1.': 'it-IT'}})
                            </span>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 col-12 cont">
            <div class="col-md-12 bg">
                <h3>Totale Casi</h3>
                <span *ngFor="let region of reg; index as i; last as last">
                    <div class="casesTot my-3" *ngIf="last">
                        {{region.totale_casi | number: '1.': 'it-IT'}}
                    </div>
                </span>
                <div class="sub">
                    <h6 class="subtitle">Incremento</h6>
                    <span *ngFor="let region of reg; index as i; last as last">
                        <div *ngIf="last">
                            <span style="color:rgb(255, 170, 0);">
                                {{region.totale_casi - reg[i -1].totale_casi | number: '1.': 'it-IT'}}
                            </span>
                            <span style="color:lightgray; font-size:0.5em;">
                                + ({{region.totale_casi - reg[i -1].totale_casi - (reg[i -1].totale_casi - reg[i -2].totale_casi) | number: '1.': 'it-IT'}})
                            </span>
                        </div>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid megaBox">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
            <h4 class="text-center my-3">Situazione inerente le singole Province</h4>
            <div class="col-md-12 fixed box-w">
                <div class="table-responsive">
                    <table class="table table-dark">
                        <thead>
                            <tr>
                                <th>Provincia</th>
                                <th>Casi Totali</th>
                                <th>Incremento</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let province of prov; index as i;">
                                <td>{{province.denominazione_provincia}}</td>
                                <td style="color:red">{{province.totale_casi | number: '1.': 'it-IT'}}</td>
                                <td>{{province.totale_casi - prov2[i].totale_casi | number: '1.': 'it-IT'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 cont">
            <div class="col-md-12 bg box-bottom">
                <h2 class="text-center">Tamponi Effettuati:
                    <span class="tampons" *ngFor="let region of reg; index as i; last as last">
                        <div *ngIf="last">
                            <span>
                                {{region.tamponi - reg[i -1].tamponi | number: '1.': 'it-IT'}}
                            </span>
                        </div>
                    </span>
                </h2>
                <div class="sub">
                    <h6 class="subtitle">
                        Incidenza dei positivi rispetto ai tamponi effettuati
                    </h6>
                    <span *ngFor="let region of reg; index as i; last as last">
                        <div *ngIf="last" style="color:rgba(211, 211, 211, 0.664)">
                           {{(region.nuovi_positivi / (region.tamponi - reg[i-1].tamponi))* 100 | number: '1.1-2': 'it-IT'}} %
                        </div>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <button class="btn btn-warning m-auto d-block"  (click)="goBack()"><i class="fa fa-fast-backward" aria-hidden="true"></i> Torna Indietro</button>
</div>